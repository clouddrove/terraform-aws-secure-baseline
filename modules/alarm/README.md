<!-- This file was automatically generated by the `terraform-docs` using Reposityr Github workflow. -->

# AWS Lambda Alert Terraform Module

This Terraform module is designed to facilitate the creation of AWS Lambda alerts. It provides a generic way of publishing messages to a Slack channel using SNS topic and Lambda function.

## Usage
```hcl
module "alarm" {
  source      = "clouddrove/secure-baseline/aws//modules/alarm"
  version     = "1.4.0"

  name        = "alarm"
  environment = "test"
  label_order = ["name", "environment"]

  enabled                    = true
  unauthorized_api_calls     = true
  no_mfa_console_signin      = true
  root_usage                 = true
  iam_changes                = true
  cloudtrail_cfg_changes     = true
  console_signin_failures    = true
  disable_or_delete_cmk      = true
  s3_bucket_policy_changes   = true
  security_group_changes     = true
  nacl_changes               = true
  network_gw_changes         = true
  route_table_changes        = true
  vpc_changes                = true
  alarm_namespace            = "Alert_Alarm"
  aws_config_changes_enabled = true

  variables = {
    SLACK_WEBHOOK = "" # Webhook for the slack notification
    SLACK_CHANNEL = "" # Channel of the Slack where the notification will receive
  }
}
```


<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.3.6 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | >= 5.10.0 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | >= 5.10.0 |
| <a name="provider_null"></a> [null](#provider\_null) | n/a |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_alarm-lambda"></a> [alarm-lambda](#module\_alarm-lambda) | clouddrove/lambda/aws | 1.3.0 |
| <a name="module_labels"></a> [labels](#module\_labels) | clouddrove/labels/aws | 1.3.0 |
| <a name="module_sns"></a> [sns](#module\_sns) | clouddrove/sns/aws | 1.3.0 |

## Resources

| Name | Type |
|------|------|
| [aws_cloudwatch_log_group.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_group) | resource |
| [aws_cloudwatch_log_metric_filter.aws_config_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.cloudtrail_cfg_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.console_signin_failures](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.disable_or_delete_cmk](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.iam_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.nacl_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.network_gw_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.no_mfa_console_signin](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.root_usage](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.route_table_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.s3_bucket_policy_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.security_group_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.unauthorized_api_calls](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_log_metric_filter.vpc_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_log_metric_filter) | resource |
| [aws_cloudwatch_metric_alarm.aws_config_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.cloudtrail_cfg_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.console_signin_failures](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.disable_or_delete_cmk](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.iam_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.nacl_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.network_gw_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.no_mfa_console_signin](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.root_usage](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.route_table_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.s3_bucket_policy_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.security_group_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.unauthorized_api_calls](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_cloudwatch_metric_alarm.vpc_changes](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudwatch_metric_alarm) | resource |
| [aws_kms_key.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/kms_key) | resource |
| [null_resource.cluster](https://registry.terraform.io/providers/hashicorp/null/latest/docs/resources/resource) | resource |
| [aws_caller_identity.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/caller_identity) | data source |
| [aws_iam_policy_document.kms](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_alarm_namespace"></a> [alarm\_namespace](#input\_alarm\_namespace) | The namespace in which all alarms are set up. | `string` | `""` | no |
| <a name="input_aws_config_changes_enabled"></a> [aws\_config\_changes\_enabled](#input\_aws\_config\_changes\_enabled) | If you want to create alarm when any changes in aws config. | `bool` | `true` | no |
| <a name="input_cloudtrail_cfg_changes"></a> [cloudtrail\_cfg\_changes](#input\_cloudtrail\_cfg\_changes) | If you want to create alarm when any changes in cloudtrail cfg. | `bool` | `true` | no |
| <a name="input_console_signin_failures"></a> [console\_signin\_failures](#input\_console\_signin\_failures) | If you want to create alarm when any changes in cloudtrail cfg. | `bool` | `true` | no |
| <a name="input_disable_or_delete_cmk"></a> [disable\_or\_delete\_cmk](#input\_disable\_or\_delete\_cmk) | If you want to create alarm when disable or delete in cmk. | `bool` | `true` | no |
| <a name="input_enabled"></a> [enabled](#input\_enabled) | The boolean flag whether this module is enabled or not. No resources are created when set to false. | `bool` | `true` | no |
| <a name="input_environment"></a> [environment](#input\_environment) | Environment (e.g. `prod`, `dev`, `staging`). | `string` | `""` | no |
| <a name="input_iam_changes"></a> [iam\_changes](#input\_iam\_changes) | If you want to create alarm when any changes in IAM. | `bool` | `true` | no |
| <a name="input_key_deletion_window_in_days"></a> [key\_deletion\_window\_in\_days](#input\_key\_deletion\_window\_in\_days) | Duration in days after which the key is deleted after destruction of the resource, must be between 7 and 30 days. Defaults to 30 days. | `number` | `10` | no |
| <a name="input_label_order"></a> [label\_order](#input\_label\_order) | Label order, e.g. `name`,`application`. | `list(any)` | `[]` | no |
| <a name="input_log_retention_days"></a> [log\_retention\_days](#input\_log\_retention\_days) | Number of days to keep AWS logs around in specific log group. | `string` | `90` | no |
| <a name="input_managedby"></a> [managedby](#input\_managedby) | ManagedBy, eg 'CloudDrove' | `string` | `"hello@clouddrove.com"` | no |
| <a name="input_nacl_changes"></a> [nacl\_changes](#input\_nacl\_changes) | If you want to create alarm when any changes in nacl. | `bool` | `true` | no |
| <a name="input_name"></a> [name](#input\_name) | Name  (e.g. `app` or `cluster`). | `string` | `""` | no |
| <a name="input_network_gw_changes"></a> [network\_gw\_changes](#input\_network\_gw\_changes) | If you want to create alarm when any changes in network gateway. | `bool` | `true` | no |
| <a name="input_no_mfa_console_signin"></a> [no\_mfa\_console\_signin](#input\_no\_mfa\_console\_signin) | If you want to create alarm when MFA not enabled on root user. | `bool` | `true` | no |
| <a name="input_root_usage"></a> [root\_usage](#input\_root\_usage) | If you want to create alarm when sign in with root user. | `bool` | `true` | no |
| <a name="input_route_table_changes"></a> [route\_table\_changes](#input\_route\_table\_changes) | If you want to create alarm when any changes in network gateway. | `bool` | `true` | no |
| <a name="input_s3_bucket_policy_changes"></a> [s3\_bucket\_policy\_changes](#input\_s3\_bucket\_policy\_changes) | If you want to create alarm when any changes in S3 policy. | `bool` | `true` | no |
| <a name="input_security_group_changes"></a> [security\_group\_changes](#input\_security\_group\_changes) | If you want to create alarm when any changes on security groups. | `bool` | `true` | no |
| <a name="input_unauthorized_api_calls"></a> [unauthorized\_api\_calls](#input\_unauthorized\_api\_calls) | If you want to create alarm for unauthorized api calls. | `bool` | `true` | no |
| <a name="input_variables"></a> [variables](#input\_variables) | The environment variables for lambda function. | `map` | `{}` | no |
| <a name="input_vpc_changes"></a> [vpc\_changes](#input\_vpc\_changes) | If you want to create alarm when any changes in vpc. | `bool` | `true` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_alarm_sns_arn"></a> [alarm\_sns\_arn](#output\_alarm\_sns\_arn) | The SNS topic to which CloudWatch Alarms will be sent. |
| <a name="output_alarm_sns_id"></a> [alarm\_sns\_id](#output\_alarm\_sns\_id) | The SNS topic to which CloudWatch Alarms will be sent. |
| <a name="output_tags"></a> [tags](#output\_tags) | A mapping of tags to assign to the resource. |
<!-- END_TF_DOCS -->



## Feedback
If you come accross a bug or have any feedback, please log it in our [issue tracker](https://github.com/clouddrove/terraform-aws-secure-baseline/modules/alarm/issues), or feel free to drop us an email at [hello@clouddrove.com](mailto:hello@clouddrove.com).

If you have found it worth your time, go ahead and give us a ★ on [our GitHub](https://github.com/clouddrove/terraform-aws-secure-baseline/modules/alarm)!

## About us

At [CloudDrove][website], we offer expert guidance, implementation support and services to help organisations accelerate their journey to the cloud. Our services include docker and container orchestration, cloud migration and adoption, infrastructure automation, application modernisation and remediation, and performance engineering.

<p align="center">We are <b> The Cloud Experts!</b></p>
<hr />
<p align="center">We ❤️  <a href="https://github.com/clouddrove">Open Source</a> and you can check out <a href="https://github.com/clouddrove">our other modules</a> to get help with your new Cloud ideas.</p>

  [website]: https://clouddrove.com
  [github]: https://github.com/clouddrove
  [linkedin]: https://cpco.io/linkedin
  [twitter]: https://twitter.com/clouddrove/
  [email]: https://clouddrove.com/contact-us.html
  [terraform_modules]: https://github.com/clouddrove?utf8=%E2%9C%93&q=terraform-&type=&language=
